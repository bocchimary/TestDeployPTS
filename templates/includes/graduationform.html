<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Grad Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'css/graduationform.style.css' %}" />
  </head>
  <body>
    <!-- Modal -->
    <div
      class="modal fade"
      id="graduationModal"
      tabindex="-1"
      aria-labelledby="graduationModalLabel"
      aria-hidden="true"
      data-bs-backdrop="static" 
  data-bs-keyboard="false"
    >
      <div
        class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"
      >
        <div class="modal-content">
          <div class="modal-header text-white pb-2">
            <h5 id="graduationModalLabel">
              <i class="bi bi-mortarboard me-2"></i> Application for Graduation Form
            </h5>
<<<<<<< HEAD
            <button type="button" class="btn-close btn-close-white mb-1" data-bs-dismiss="modal" aria-label="Close"></button>
=======
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
>>>>>>> ea4b881e7487b81f34d796106718cb472a09ff15
          </div>
          <div class="modal-body">
            <!-- FORM START -->
            <form id="graduationForm" method="POST" action="{% url 'submit_graduation_form' %}" novalidate>
              {% csrf_token %}

              <!-- Personal Information Section -->
              <div class="mb-4">
                <div class="row mb-3">
<<<<<<< HEAD
                  <div class="col-md-6 mt-0">
=======
                  <div class="col-md-6 mb-3 mt-0">
>>>>>>> ea4b881e7487b81f34d796106718cb472a09ff15
                    <label for="grad-date" class="form-label fw-semibold">Date: <span class="text-danger">*</span></label>
                    <input type="date" name="grad-date" id="grad-date" class="form-control" required value="{{ today }}" readonly/>
                    <div class="invalid-feedback">Please select a date.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="grad-appno" class="form-label fw-semibold">Application number: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-appno" id="grad-appno" class="form-control" required placeholder="Application no." value="{{ graduation_prefill.grad_appno }}" readonly />
                    <div class="invalid-feedback">Please enter your application number.</div>
                  </div>
                </div>
<<<<<<< HEAD
                <h6 class="text-white p-2 modal-sub-header">
                  <i class="bi bi-person-fill me-2"></i>Personal Information
                </h6>
=======
>>>>>>> ea4b881e7487b81f34d796106718cb472a09ff15
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="grad-firstname" class="form-label fw-semibold">First Name: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-firstname" id="grad-firstname" class="form-control" required placeholder="First Name"/>
                    <div class="invalid-feedback">Please enter your first name.</div>
                  </div>
                  <div class="col-md-4">
                    <label for="grad-middlename" class="form-label fw-semibold">Middle Name:</label>
                    <input type="text" name="grad-middlename" id="grad-middlename" class="form-control" placeholder="Middle Name (Optional)"/>
                  </div>
                  <div class="col-md-4">
                    <label for="grad-lastname" class="form-label fw-semibold">Last Name: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-lastname" id="grad-lastname" class="form-control" required placeholder="Last Name"/>
                    <div class="invalid-feedback">Please enter your last name.</div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-3">
                    <label for="grad-gender" class="form-label fw-semibold">Gender: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-gender" id="grad-gender" class="form-control" required placeholder="Gender" value="{{ graduation_prefill.gender }}" readonly/>
                    <div class="invalid-feedback">Please enter your gender.</div>
                  </div>
                  <div class="col-md-4">
                    <label for="grad-phoneno" class="form-label fw-semibold">Phone number: <span class="text-danger">*</span></label>
                    <input type="tel" name="grad-phoneno" id="grad-phoneno" class="form-control" required placeholder="Enter your phone no." value="{{ graduation_prefill.phone }}" readonly/>
                    <div class="invalid-feedback">Please enter your phone number.</div>
                  </div>
                  <div class="col-md-5">
                    <label for="grad-email" class="form-label fw-semibold">Email: <span class="text-danger">*</span></label>
                    <input type="email" name="grad-email" id="grad-email" class="form-control" required placeholder="Email" value="{{ graduation_prefill.email }}" readonly/>
                    <div class="invalid-feedback">Please enter a valid email address.</div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="grad-birthdate" class="form-label fw-semibold">Date of Birth: <span class="text-danger">*</span></label>
                    <input type="date" name="grad-birthdate" id="grad-birthdate" class="form-control" required value="{{ graduation_prefill.birthdate }}" />
                    <div class="invalid-feedback">Please select your date of birth.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="grad-placeofbirth" class="form-label fw-semibold">Place of Birth: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-placeofbirth" id="grad-placeofbirth" class="form-control" required placeholder="Place of birth" value="{{ graduation_prefill.place_of_birth }}" />
                    <div class="invalid-feedback">Please enter your place of birth.</div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="grad-present-address" class="form-label fw-semibold">Present Address: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="grad-present-address" name="grad-present-address" required placeholder="Present Address" value="{{ graduation_prefill.present_address }}">
                    <div class="invalid-feedback">Please enter your present address.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="grad-permanent-address" class="form-label fw-semibold">Permanent Address: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="grad-permanent-address" name="grad-permanent-address" required placeholder="Permanent Address" value="{{ graduation_prefill.permanent_address }}">
                    <div class="invalid-feedback">Please enter your permanent address.</div>
                  </div>
                </div>
<<<<<<< HEAD
                <h6 class="text-white p-2 modal-sub-header">
                  <i class="bi bi-file-earmark-person-fill me-2"></i>Academic Information
                </h6>
=======
>>>>>>> ea4b881e7487b81f34d796106718cb472a09ff15
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="grad-course" class="form-label fw-semibold">Degree/Program: <span class="text-danger">*</span></label>
                    <input type="text" name="grad-course" id="grad-course" class="form-control" required placeholder="Degree/Program" value="{{ graduation_prefill.course }}" readonly/>
                    <div class="invalid-feedback">Please enter your degree/program.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="grad-major" class="form-label fw-semibold">Major (if applicable):</label>
                    <input type="text" name="grad-major" id="grad-major" class="form-control" placeholder="Major in (optional)" value="{{ graduation_prefill.major }}" />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label for="grad-thesis-title" class="form-label fw-semibold">Thesis Title (if applicable):</label>
                    <input type="text" name="grad-thesis-title" id="grad-thesis-title" class="form-control" placeholder="Thesis Title (optional)" value="{{ graduation_prefill.thesis_title }}" />
                  </div>
                </div>
              </div>

              <!-- Subjects Currently Enrolled -->
              <div class="mb-4">
                <h6 class="text-white p-2 mb-3 modal-sub-header">
<<<<<<< HEAD
                  <i class="bi bi-journal-bookmark-fill"></i>
                  Subjects Currently Enrolled
=======
                  <i class="bi bi-journal me-2"></i>Subjects Currently Enrolled
>>>>>>> ea4b881e7487b81f34d796106718cb472a09ff15
                </h6>
                <div class="container">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0" id="subjectsTable">
                      <thead>
                        <tr>
                          <th scope="col">Course no.</th>
                          <th scope="col">Course Title</th>
                          <th scope="col">Units</th>
                          <th scope="col">Remarks</th>
                        </tr>
                      </thead>
                      <tbody id="subjectsTableBody">
                        <!-- 5 static rows -->
                        {% for i in "12345" %}
                        <tr>
                          <td><input type="text" name="subject_course_no[]" class="form-control" /></td>
                          <td><input type="text" name="subject_title[]" class="form-control" /></td>
                          <td><input type="text" name="subject_units[]" class="form-control" /></td>
                          <td><input type="text" name="subject_remarks[]" class="form-control" /></td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                    <button type="button" class="btn btn-outline-primary mt-2 text-white btn-addrow" onclick="addSubjectRow()">
                      <i class="bi bi-plus-lg"></i> Add 1 Subject
                    </button>
                  </div>
                </div>
              </div>

              <!-- Declaration Section -->
              <div class="container">
                <p class="fs-6 text-start">
                  I have the honor to apply for graduation in the course leading to the degree of 
                  <input type="text" class="underline-input fst-italic" name="degree_program" placeholder="Degree/Program" value="{{ graduation_prefill.course }}">
                  Major in 
                  <input type="text" class="underline-input fst-italic" id="grad-major-bottom" name="major_bottom" value="{{ graduation_prefill.major }}"> 
                  this Graduation 
                  <input type="text" class="underline-input-year fst-italic" name="graduation_year" placeholder="Year">
                </p>
                <div class="mt-3 d-flex align-items-start">
                  <div class="form-check me-2">
                    <input class="form-check-input mt-2" type="checkbox" id="gradCheckbox" name="confirmed" value="1" required>
                  </div>
                  <p class="fw-bold fst-italic text-justify fs-6 mb-0">
                    It is understood that I shall be entitled to a diploma / certificate if and after 
                    I have satisfactorily completed all the requirements for graduation including but
                    not limited to the submission of my bound manuscript/special problem/ narrative
                    reports and clearance for my graduation in this University.
                  </p>
                </div>
                <div class="invalid-feedback d-block" id="checkbox-feedback">Please confirm that you understand the graduation requirements.</div>
              </div>

              <div class="alert alert-info mt-3" role="alert">
                <i class="bi bi-clock me-2"></i>
                <strong>Office Hours Notice:</strong> The Office of the
                Registrar processes forms on weekdays from 8:00 AM to 4:00 PM.
                Requests submitted outside these hours will be processed on the
                next business day.
              </div>

              <div class="d-flex justify-content-end gap-2 mt-4">
                <button
                  class="btn btn-secondary"
                  type="button"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button
                  class="btn text-white btn-submit"
                  type="submit"
                >
                  Submit
                </button>
              </div>
            </form>
            <!-- FORM END -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap bundle first -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Then your own scripts -->
    <script>
      function addSubjectRow() {
        const tbody = document.getElementById('subjectsTableBody');
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input type="text" name="subject_course_no[]" class="form-control" /></td>
          <td><input type="text" name="subject_title[]" class="form-control" /></td>
          <td><input type="text" name="subject_units[]" class="form-control" /></td>
          <td><input type="text" name="subject_remarks[]" class="form-control" /></td>
        `;
        tbody.appendChild(tr);
      }

      // Form validation
      document.getElementById('graduationForm').addEventListener('submit', function(event) {
        const checkbox = document.getElementById('gradCheckbox');
        const feedback = document.getElementById('checkbox-feedback');
        
        // Check if checkbox is required and not checked
        if (!checkbox.checked) {
          event.preventDefault();
          event.stopPropagation();
          feedback.style.display = 'block';
          checkbox.focus();
          return false;
        } else {
          feedback.style.display = 'none';
        }
        
        if (!this.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        this.classList.add('was-validated');
      });

      // Checkbox validation
      document.getElementById('gradCheckbox').addEventListener('change', function() {
        const feedback = document.getElementById('checkbox-feedback');
        if (this.checked) {
          feedback.style.display = 'none';
        } else {
          feedback.style.display = 'block';
        }
      });
    </script>
  </body>
</html>