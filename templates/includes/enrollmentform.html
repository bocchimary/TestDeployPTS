<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Enrollment Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'css/enrollmentform.style.css' %}" />
  </head>
  <body>
    <!-- Modal -->
    <div
      class="modal fade"
      id="enrollmentModal"
      tabindex="-1"
      aria-labelledby="enrollmentModalLabel"
      aria-hidden="true"
      data-bs-backdrop="static" 
  data-bs-keyboard="false"
    >
      <div
        class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"
      >
        <div class="modal-content">
          <div class="modal-header text-white pb-1">
            <h5 id="enrollmentModalLabel">
              <i class="bi bi-file-earmark-person-fill me-2"></i> Temporary Enrollment
              Form
            </h5>
          </div>
          <div class="modal-body">
            <!-- FORM START -->
            <form
              id="enrollmentForm"
              method="POST"
              action="{% url 'submit_enrollment_form' %}"
              novalidate
            >
              {% csrf_token %}

              <!-- Personal Information Section -->
              <div class="mb-1">
                <div class="row mb-3">
                  <div class="col-md-4 mb-3 mt-0">
                    <label for="enrollment-date" class="form-label fw-semibold">
                      Date of Enrollment: <span class="text-danger">*</span>
                    </label>
                    <input type="date" name="enrollment-date" id="enrollment-date" class="form-control" required aria-required="true" aria-describedby="enrollment-date-help" />
                    <div class="invalid-feedback" id="enrollment-date-help">
                      Please enter date of enrollment.
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="enrollment-appno" class="form-label fw-semibold">
                      Academic Year: <span class="text-danger">*</span>
                    </label>
                    <input type="text" name="enrollment-appno" id="enrollment-appno" class="form-control" required placeholder="e.g 2025-2026" aria-required="true" aria-describedby="enrollment-appno-help" />
                    <div class="invalid-feedback" id="enrollment-appno-help">
                      Invalid application number.
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="enrollment-semester" class="form-label fw-semibold">Semester: <span class="text-danger">*</span></label>
                    <select name="request-student-semester" id="enrollment-semester" class="form-select" required aria-required="true">
                      <option value="" selected>None</option>
                      <option value="1-2425">First Semester</option>
                      <option value="2-2425">Second Semester</option>
                    </select>
                  </div>
                </div>
                <h6 class="text-white p-2 mb-3 modal-sub-header">
                  <i class="bi bi-person-fill me-2"></i>Personal Information
                </h6>
                <div class="row mb-3">
                  <div class="col-md-6 mb-3">
                    <label for="enrollment-idnum" class="form-label fw-semibold">
                      Student no : <span class="text-danger">*</span>
                    </label>
                    <input type="text" name="enrollment-idnum" id="enrollment-idnum" class="form-control" required placeholder="Type your ID number" aria-required="true" aria-describedby="enrollment-idnum-help" />
                    <div class="invalid-feedback" id="enrollment-idnum-help">
                      Please enter your ID number.
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="enrollment-fullName" class="form-label fw-semibold">
                      Full Name: <span class="text-danger">*</span>
                    </label>
                    <input type="text" name="full_name" id="enrollment-fullName" class="form-control" value="{{ enrollment_prefill.full_name }}" readonly aria-readonly="true" />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label for="enrollment-course" class="form-label fw-semibold">
                      Degree/Program: <span class="text-danger">*</span>
                    </label>
                    <select name="enrollment-course" id="enrollment-course" class="form-select" required aria-required="true">
                      <option selected disabled value="">Loading programs...</option>
                    </select>
                    <div class="invalid-feedback">Please select your course.</div>
                  </div>
                </div>
                <div class="row mb-3 mt-3">
                  <div class="col-md-5">
                    <label for="enrollment-major" class="form-label fw-semibold">
                      Major (optional):
                    </label>
                    <input type="text" name="enrollment-major" id="enrollment-major" class="form-control" placeholder="Major" aria-describedby="enrollment-major-help" />
                    <div class="form-text" id="enrollment-major-help">Leave blank if not applicable.</div>
                  </div>
                  <div class="col-md-4">
                    <label for="enrollment-year" class="form-label fw-semibold">
                      Year Level: <span class="text-danger">*</span>
                    </label>
                    <select name="enrollment-year" id="enrollment-year" class="form-select" required aria-required="true" aria-describedby="enrollment-year-help">
                      <option selected disabled value="">Select year level</option>
                    </select>
                    <div class="invalid-feedback" id="enrollment-year-help">Please select your year level.</div>
                  </div>
                  <div class="col-md-3">
                    <label for="enrollment-section" class="form-label fw-semibold">
                      Section:
                    </label>
                    <input type="text" name="enrollment-section" id="enrollment-section" class="form-control" placeholder="e.g. A, B, C" aria-describedby="enrollment-section-help" />
                    <div class="form-text" id="enrollment-section-help">Leave blank if not applicable.</div>
                  </div>
                </div>
                <h6 class="text-white p-2 mt-3 mb-3 modal-sub-header">
                  <i class="bi bi-person-fill me-2"></i>Basic Details
                </h6>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="enrollment-birthdate" class="form-label fw-semibold">
                      Date of Birth: <span class="text-danger">*</span>
                    </label>
                    <input type="date" name="enrollment-birthdate" id="enrollment-birthdate" class="form-control" value="{{ enrollment_prefill.birthdate }}" required aria-required="true" aria-describedby="enrollment-birthdate-help" />
                    <div class="invalid-feedback" id="enrollment-birthdate-help">Please enter your date of birth</div>
                  </div>
                  <div class="col-md-3">
                    <label for="enrollment-phoneno" class="form-label fw-semibold">
                      Contact number: <span class="text-danger">*</span>
                    </label>
                    <input type="tel" name="enrollment-phoneno" id="enrollment-phoneno" class="form-control" value="{{ enrollment_prefill.contact_number }}" readonly aria-readonly="true" />
                    <div class="invalid-feedback">Please enter your phone no.</div>
                  </div>
                  <div class="col-md-5">
                    <label for="enrollment-email" class="form-label fw-semibold">
                      Email: <span class="text-danger">*</span>
                    </label>
                    <input type="email" name="enrollment-email" class="form-control" id="enrollment-email" value="{{ enrollment_prefill.email }}" readonly aria-readonly="true" />
                    <div class="invalid-feedback">Please enter your email.</div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-12">
                    <label for="enrollment-presentadd" class="form-label fw-semibold">
                      Current Address: <span class="text-danger">*</span>
                    </label>
                    <input type="text" name="enrollment-presentadd" id="enrollment-presentadd" class="form-control" value="{{ enrollment_prefill.address }}" required aria-required="true" aria-describedby="enrollment-presentadd-help" />
                    <div class="invalid-feedback" id="enrollment-presentadd-help">Please enter your present address.</div>
                  </div>
                </div>
              </div>
              <h6 class="text-white p-2 mb-3 mt-3 modal-sub-header">
                <i class="bi bi-person-lines-fill me-2"></i>Courses/Subjects
              </h6>
              <section class="intro">
                <div class="container">
                  <div class="row justify-content-center">
                    <div class="col-12">
                      <div class="card">
                        <div class="card-body">
                          <div class="fs-6"> Please input your subjects below.</div>
                          <div class="table-responsive">
                            <table class="table table-hover mb-0" id="enrollmentSubjectsTable">
                              <thead>
                                <tr>
                                  <th scope="col">Code</th>
                                  <th scope="col">Subjects</th>
                                  <th scope="col">Professor</th>
                                  <th scope="col">Units</th>
                                </tr>
                              </thead>
                              <tbody id="enrollmentSubjectsTableBody">
                                {% for i in "12345" %}
                                <tr>
                                  <td><input type="text" name="subject_code[]" class="form-control" aria-label="Code {{ forloop.counter }}"></td>
                                  <td><input type="text" name="subject_name[]" class="form-control" aria-label="Subject {{ forloop.counter }}"></td>
                                  <td><input type="text" name="subject_professor[]" class="form-control" aria-label="Professor {{ forloop.counter }}"></td>
                                  <td><input type="number" name="subject_units[]" class="form-control" aria-label="Units {{ forloop.counter }}" min="0" step="1" inputmode="numeric" pattern="\d*"></td>
                                </tr>
                                {% endfor %}
                              </tbody>
                            </table>
                            <button type="button" class="btn btn-outline-primary mt-2" onclick="addEnrollmentSubjectRow()">
                              <i class="bi bi-plus-lg"></i> Add 1 Subject
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <div class="d-flex justify-content-end gap-2 mt-4">
                <button
                  class="btn btn-secondary"
                  type="button"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <button class="btn text-white btn-submit" type="submit">
                  Submit
                </button>
              </div>
            </form>
            <!-- FORM END -->
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- enrollment.js is loaded in the main page -->
  </body>
</html>
